(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bdbf23c"],{"0f51":function(t,e,o){},"2f14":function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));o("99af"),o("fb6a");var a=o("d4ec"),n=o("bee2"),r=function(){function t(){Object(a["a"])(this,t)}return Object(n["a"])(t,[{key:"queryString",value:function(t){var e="";for(var o in t)e+="".concat(o,"=").concat(t[o],"&");return e.slice(0,-1)}}]),t}(),s=new r},"305b":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"secure"},[o("div",{staticClass:"topBgcolor"}),o("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),t._m(0),o("div",{staticClass:"secure-box"},[o("div",[o("van-cell",{attrs:{title:"修改密码",isLink:""},on:{click:t.openPasswordPopup}}),o("van-cell",{attrs:{title:"注销账号",isLink:""},on:{click:t.destroyAcount}}),o("van-cell",{attrs:{title:"退出登录",isLink:""},on:{click:t.logout}})],1)]),o("van-popup",{staticClass:"reg-box",attrs:{position:"bottom",closeable:"",round:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("div",{staticClass:"message-box"},[o("h2",[t._v("修改密码")]),o("van-form",[t._l(t.passwords,(function(e,a){return o("van-field",{key:a,staticClass:"border-bottom",attrs:{label:e.title,type:e.isPassword?"password":"text",placeholder:"6-16位密码且以字母开头","right-icon":e.isPassword?"closed-eye":"eye-o"},on:{"click-right-icon":function(o){return t.viewpassword(e)}},model:{value:e.password,callback:function(o){t.$set(e,"password",o)},expression:"item.password"}})})),o("div",{staticClass:"register-btn"},[o("van-button",{attrs:{type:"info","native-type":"submit",color:"#0b34ba"},on:{click:t.confirmPassword}},[t._v("确认修改")])],1)],2)],1)])],1)},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"my-bg"},[o("div",{staticClass:"bg auto-img"})])}],r=(o("0f51"),o("2f14")),s=o("e3a8"),i={data:function(){return{show:!1,passwords:{old:{password:"",isPassword:!0,title:"旧密码："},new:{password:"",isPassword:!0,title:"新密码："}}}},created:function(){this.islogin()},methods:{back:function(){this.$router.go(-1)},goMenu:function(){this.$router.push({name:"Menu"})},islogin:function(){var t=localStorage.getItem("CSTK");if(!t)return this.$toast("请先登录"),this.$router.push({name:"Login"})},viewpassword:function(t){t.isPassword=!t.isPassword},openPasswordPopup:function(){var t=localStorage.getItem("CSTK");if(!t)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.show=!0},confirmPassword:function(){var t=this,e=localStorage.getItem("CSTK");if(!e)return this.$router.push({name:"Login"});var o={oldPassword:{value:this.passwords.old.password,reg:/^[A_Za-z]\w{5,15}$/,errorMsg:"支持6-16位密码"},password:{value:this.passwords.new.password,reg:/^[A_Za-z]\w{5,15}$/,errorMsg:"支持6-16位密码"}};if(s["a"].valid(o)){this.$toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0});var a=r["a"].queryString({appkey:this.appkey,tokenString:e,oldPassword:this.passwords.old.password,password:this.passwords.new.password});this.axios({method:"POST",url:"/updatePassword",data:a}).then((function(e){if(t.$toast.clear(),t.passwords.old.password==t.passwords.new.password)return t.$toast("新密码与旧密码不能相同！");"E001"==e.data.code?(localStorage.removeItem("CSTK"),t.$toast("修改成功，请重新登录"),t.$router.push({name:"Login"})):t.$notify({type:"warning",message:e.data.msg})})).catch((function(e){t.$toast.clear()}))}},destroyAcount:function(){var t=this,e=localStorage.getItem("CSTK");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$dialog.confirm({title:"注销账号",message:"是否确定注销账号，一旦确认注销则无法恢复",confirmButtonColor:"#0b34ba"}).then((function(){var e=localStorage.getItem("CSTK");if(!e)return t.$toast("请先登录"),t.$router.push({name:"Login"});t.$toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0});var o=r["a"].queryString({appkey:t.appkey,tokenString:e});t.axios({method:"POST",url:"/destroyAccount",data:o}).then((function(e){t.$toast.clear(),"G001"==e.data.code?(localStorage.removeItem("CSTK"),t.$toast("注销成功，即将返回登录"),setTimeout((function(){t.$router.push({name:"Login"})}),2e3)):t.$notify({type:"warning",message:e.data.msg})})).catch((function(e){t.$toast.clear()}))})).catch((function(){}))},logout:function(){var t=this,e=localStorage.getItem("CSTK");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$dialog.confirm({title:"退出登录",message:"是否确定退出登录？",confirmButtonColor:"#0b34ba"}).then((function(){t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),localStorage.removeItem("CSTK"),setTimeout((function(){t.$toast.clear(),t.$router.push({name:"Login"})}),1e3)})).catch((function(){}))}}},c=i,u=o("2877"),l=Object(u["a"])(c,a,n,!1,null,null,null);e["default"]=l.exports},"99af":function(t,e,o){"use strict";var a=o("23e7"),n=o("d039"),r=o("e8b5"),s=o("861d"),i=o("7b0b"),c=o("50c4"),u=o("8418"),l=o("65f0"),d=o("1dde"),f=o("b622"),p=o("2d00"),g=f("isConcatSpreadable"),h=9007199254740991,w="Maximum allowed index exceeded",m=p>=51||!n((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),v=d("concat"),b=function(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:r(t)},$=!m||!v;a({target:"Array",proto:!0,forced:$},{concat:function(t){var e,o,a,n,r,s=i(this),d=l(s,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(r=-1===e?s:arguments[e],b(r)){if(n=c(r.length),f+n>h)throw TypeError(w);for(o=0;o<n;o++,f++)o in r&&u(d,f,r[o])}else{if(f>=h)throw TypeError(w);u(d,f++,r)}return d.length=f,d}})},bee2:function(t,e,o){"use strict";function a(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}o.d(e,"a",(function(){return n}))},d4ec:function(t,e,o){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}o.d(e,"a",(function(){return a}))},e3a8:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var a=o("d4ec"),n=o("bee2"),r=(o("748b"),o("0860")),s=o("2b0e");s["a"].use(r["a"]);var i=function(){function t(){Object(a["a"])(this,t)}return Object(n["a"])(t,[{key:"valid",value:function(t){for(var e in t)if(!t[e].reg.test(t[e].value))return Object(r["a"])({type:"warning",message:t[e].errorMsg}),!1;return!0}}]),t}(),c=new i}}]);
//# sourceMappingURL=chunk-6bdbf23c.22807633.js.map